\lstset{
  language=Python,
  rangeprefix=\#\%\ ,
  rangesuffix=\ \%\#,
  includerangemarker=false,
  %gobble=2,% TODO doesn't work for inputlisting
  morekeywords={assert,self},
  basicstyle=\small\ttfamily,
  moredelim=[s][\lst@commentstyle]{<<}{>>},
}
